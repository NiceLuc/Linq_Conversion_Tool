public {{ReturnType}} {{MethodName}}({{#each Parameters}}{{#if @index}}, {{/if}}{{#if IsRef}}ref {{/if}}{{ParameterType}} {{ParameterName}}{{/each}}){{#newline}}
        { {{#newline}}
            {{ReturnType}} result = null;{{#newline}}
            using (var query = CreateQuery()){{#newline}}
            { {{#newline}}
                query.CommandType = CommandType.StoredProcedure;{{#newline}}
                query.SQL = "{{SprocName}}";{{#newline}}
{{#each SprocParameters}}
{{#if ShouldCaptureResult}}
                var {{MethodParameterName}}Param = query.AddParameter("@{{SprocParameterName}}", SqlDbType.{{SprocParameterType}}, {{MethodParameterName}}, ParameterDirection.{{SprocParameterDirection}}{{#if HasStringLength}}, {{SprocParameterLength}}{{/if}});{{#newline}}
{{#else}}
{{#if IsInputParameter}}
{{#if HasStringLength}}
                query.AddParameter("@{{SprocParameterName}}", SqlDbType.{{SprocParameterType}}, {{MethodParameterName}}, ParameterDirection.Input, {{SprocParameterLength}});{{#newline}}
{{#else}}
                query.AddParameter("@{{SprocParameterName}}", SqlDbType.{{SprocParameterType}}, {{MethodParameterName}});{{#newline}}
{{/if}}
{{#else}}
                query.AddParameter("@{{SprocParameterName}}", SqlDbType.{{SprocParameterType}}, {{MethodParameterName}}, ParameterDirection.{{SprocParameterDirection}}{{#if HasStringLength}}, {{SprocParameterLength}}{{/if}});{{#newline}}
{{/if}}
{{/if}}
{{/each}}
                {{#newline}}
                if (query.Read()){{#newline}}
                {{{#newline}}
                    result = new {{ReturnType}}{{#newline}}
                    { {{#newline}}
{{#each Properties}}
                        {{PropertyName}} = query.Value("{{PropertyName}}"),{{#newline}}
{{/each}}
                    };{{#newline}}
                } {{#newline}}
            } {{#newline}}
            {{#newline}}
            return result;{{#newline}}
        }
